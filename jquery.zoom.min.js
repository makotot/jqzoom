(function(e){e.fn.zoom=function(t){var n=e.extend({},e.fn.zoom.defaults,t),r={},i={};return r={init:function(t){var n=e(t),i=n.attr("href"),s=n.find("img");n.on("click",function(e){e.preventDefault(),r.createLargeElem(i,s),r.createOverlay()})},checkOriginPos:function(t){var n=e(window),r=t.offset().top,s=t.offset().left,o=n.scrollTop(),u=n.scrollLeft();return i.top=r-o,i.left=s-u,{top:r-o,left:s-u}},checkLargeSize:function(e){return{width:e.width(),height:e.height(),outerWidth:e.outerWidth(),outerHeight:e.outerHeight()}},placeCenter:function(t,n){var r=e(window),i=r.height(),s=r.width(),o=r.scrollTop(),u=r.scrollLeft(),a=n.outerHeight,f=n.outerWidth;return{top:(i-a)/2+o,left:(s-f)/2+u,width:f,height:a}},createLargeElem:function(t,n){function l(){a.complete?c():setTimeout(l,100)}function c(){f=r.checkLargeSize(s),o.css({width:i.width+"px",height:i.height+"px",position:"absolute",top:u.top,left:u.left,zIndex:1e3,opacity:.1,padding:"5px",backgroundColor:"#FFFFFF"}),s.css({width:i.width+"px",height:i.height+"px",zIndex:1001,opacity:.1}),s.show(),r.animateZoom(o,s,f)}var s=e('<img src="'+t+'" class="jscLargeImg" />'),o=e('<div class="jscModalWrapper"></div>'),u=r.checkOriginPos(n),a=new Image,f;i.width=n.width(),i.height=n.height(),i.element=n,r.hideOrigin(n),e("body").append(o),o.append(s),s.hide(),a.src=s.attr("src"),jQuery.support.noCloneEvent?a.onload=c:l()},createModalWrapper:function(t){var n=e('<div class="jscModalWrapper"></div>');t.wrap(n)},createOverlay:function(){var t=e('<div class="jscOverlay"></div>'),n=e(document),i=n.width(),s=n.height();t.css({position:"absolute",top:0,left:0,width:i,height:s,backgroundColor:"#000000",opacity:.5,zIndex:998}),e("body").append(t),t.on("click",function(){r.animateReduce()})},hideOrigin:function(e){e.css("visibility","hidden")},showOrigin:function(e){e.css("visibility","visible")},animateZoom:function(e,t,n){var i=r.placeCenter(t,n);e.stop().animate({width:i.width+"px",height:i.height+"px",top:i.top+"px",left:i.left+"px",opacity:1}),t.stop().animate({width:i.width+"px",height:i.height+"px",top:i.top+"px",left:i.left+"px",opacity:1})},animateReduce:function(){var t=e(".jscLargeImg"),n=e(".jscModalWrapper"),s=e(".jscOverlay");n.stop().animate({width:i.width+"px",height:i.height+"px",top:i.top+"px",left:i.left+"px"},function(){e(this).remove()}),t.stop().animate({width:i.width+"px",height:i.height+"px",top:i.top+"px",left:i.left+"px"},function(){e(this).remove(),r.showOrigin(i.element)}),s.stop().animate({opacity:0},function(){e(this).remove()})}},this.each(function(){r.init(this)})},e.fn.zoom.defaults={}})(jQuery);
